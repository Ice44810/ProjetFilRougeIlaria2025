<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Inscription - Budget App</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" />
    <link rel="stylesheet" href="../css/style.css" />
</head>

<style>
    /* CSS: Marge du corps */
    body {
        margin-left: 20px;
        margin-right: 20px;
        margin-top: 20px;
        /* OPTIONNEL: Ajoutez une largeur max pour centrer le formulaire sur les grands écrans */
        /* max-width: 400px; */
        /* margin: 20px auto; */
    }
</style>

<body>
    <form id="registerForm">
        <h3 class="text-center">Inscription</h3>

        <div class="mb-3">
            <label for="nom" class="form-label">Nom complet</label>
            <input type="text" class="form-control" id="nom" placeholder="saisir votre nom" required />
        </div>

        <div class="mb-3">
            <label for="email" class="form-label">Adresse Mail</label>
            <input type="email" class="form-control" id="email" placeholder="saisir adresse mail" required />
        </div>

        <div class="mb-3">
            <label for="motdepasse" class="form-label">Mot de passe</label>
            <input type="password" class="form-control" id="motdepasse" placeholder="saisir mot de passe" required />
        </div>

        <div class="mb-3">
            <label for="confirmmotdepasse" class="form-label">Confirmer Mot de passe</label>
            <input type="password" class="form-control" id="confirmmotdepasse" placeholder="confirmer mot de passe" required />
        </div>

        <div class="mb-3">
            <button type="submit" class="btn btn-primary w-100">Confirmer l'inscription</button>
        </div>
    </form>

    <script>
        // Correction 1: Assurez-vous que l'ID dans le HTML correspond (registerForm)
        const registerForm = document.querySelector("#registerForm");

        registerForm.addEventListener("submit", function(e) {
            e.preventDefault();

            // Correction 2: Utilisation des IDs ajoutés dans le HTML pour cibler les champs
            const nom = document.querySelector("#nom").value.trim();
            const email = document.querySelector("#email").value.trim();
            const motdepasse = document.querySelector("#motdepasse").value.trim();
            const confirmMotDePasse = document.querySelector("#confirmmotdepasse").value.trim(); // Renommage pour plus de clarté

            // Correction 3: La variable "pass" n'existait pas, on utilise "motdepasse" à la place.
            if (!nom || !email || !motdepasse || !confirmMotDePasse) {
                alert("Tous les champs doivent être remplis.");
                return;
            }

            // Validation de l'email
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(email)) {
                alert("Adresse mail invalide.");
                return;
            }

            // Validation de la longueur du mot de passe
            if (motdepasse.length < 6) {
                alert("Le mot de passe doit contenir au moins 6 caractères.");
                return;
            }

            // Correction 4: Comparaison des deux mots de passe
            if (motdepasse !== confirmMotDePasse) {
                alert("Les mots de passe ne correspondent pas.");
                return;
            }

            // Simulation d'une inscription réussie
            alert("Compte créé avec succès pour " + nom + " !");

            // Redirection possible (décommenter pour activer)
            window.location.href = "login.html";

            console.log(JSON.parse(JSON.stringify({
                nom: nom,
                email: email,
                motdepasse: motdepasse
            })));
        });
    </script>
</body>
</body>

</html>